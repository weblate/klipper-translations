# Перевірки конфігурації

Цей документ надає список кроків, які допоможуть підтвердити налаштування шпильки в файлі Klipper.cfg. Це гарна ідея, щоб запустити ці кроки після того, як наступні кроки в документі [встановлення](Встановлення.md).

Під час цього посібника необхідно внести зміни в файл налаштування Klipper. Обов'язково випишіть команду RESTART після кожного зміни в файл налаштування, щоб забезпечити, що зміна приймає ефект (тип "відновлення" в вкладці «Оксопринт», а потім натисніть кнопку "Подати"). Це також гарна ідея, щоб випустити команду STATUS після кожного RESTART, щоб переконатися, що файл налаштування успішно завантажений.

## Перевірити температуру

Почніть із перевірки правильності повідомлень про температуру. Перейдіть до розділу графіка температури в інтерфейсі користувача. Переконайтеся, що температура сопла та шару (якщо є) є і не підвищується. Якщо воно збільшується, вимкніть живлення принтера. Якщо температури не точні, перегляньте параметри «sensor_type» і «sensor_pin» для насадки та/або ложа.

## Перевірте M112

Перейдіть до командної консолі та введіть команду M112 у клемній коробці. Ця команда просить Klipper перейти у стан «вимкнення». Це призведе до появи помилки, яку можна очистити за допомогою команди FIRMWARE_RESTART у командній консолі. Octoprint також потребуватиме повторного підключення. Потім перейдіть до розділу графіка температури та переконайтеся, що температури продовжують оновлюватись і не підвищуються. Якщо температура підвищується, вимкніть живлення принтера.

## Перевірити обігрівачі

Перейдіть до розділу температурного графіка та введіть 50, а потім у вікні температури екструдера/інструмента. Температура екструдера на графіку повинна почати зростати (протягом приблизно 30 секунд). Потім перейдіть до спадного списку температури екструдера та виберіть «Вимкнути». Через кілька хвилин температура повинна почати повертатися до початкового значення кімнатної температури. Якщо температура не підвищується, перевірте параметр "heater_pin" у конфігурації.

Якщо принтер має підігрів платформи, виконайте описаний вище тест ще раз із платформою.

## Перевірте контакт активації крокового двигуна

Переконайтеся, що всі осі принтера можуть вільно рухатися вручну (крокові двигуни вимкнено). Якщо ні, видайте команду M84, щоб вимкнути двигуни. Якщо будь-яка з осей все ще не може вільно рухатися, перевірте конфігурацію крокового кроку "enable_pin" для даної осі. У більшості стандартних драйверів крокових двигунів контакт увімкнення двигуна має "активний низький рівень", тому на контакті ввімкнення має бути "!" перед PIN-кодом (наприклад, "enable_pin: !PA1").

## Перевірте кінцеві упори

Вручну перемістіть усі осі принтера так, щоб жодна з них не торкалася кінцевого упору. Надішліть команду QUERY_ENDSTOPS через командну консоль. Він має відповідати поточним станом усіх налаштованих кінцевих упорів, і всі вони мають повідомляти про стан «відкрито». Для кожного з кінцевих зупинок повторно запустіть команду QUERY_ENDSTOPS, запускаючи кінцеву зупинку вручну. Команда QUERY_ENDSTOPS має повідомити кінцеву зупинку як "TRIGGERED".

Якщо кінцевий упор виглядає перевернутим (він повідомляє "відкрито" під час спрацьовування та навпаки), додайте "!" до визначення контакту (наприклад, "endstop_pin: ^PA2") або видаліть "!" якщо вже є.

Якщо кінцевий упор взагалі не змінюється, це зазвичай вказує на те, що кінцевий упор підключено до іншого контакту. Однак для цього також може знадобитися змінити налаштування підтягування контакту («^» на початку назви endstop_pin — більшість принтерів використовуватимуть підтягуючий резистор, і «^» має бути присутнім).

## Перевірити крокові двигуни

Використовуйте команду STEPPER_BUZZ, щоб перевірити підключення кожного крокового двигуна. Почніть із позиціонування даної осі вручну до середньої точки, а потім запустіть `STEPPER_BUZZ STEPPER=stepper_x` у командній консолі. Команда STEPPER_BUZZ змусить заданий степпер переміститися на один міліметр у позитивному напрямку, а потім він повернеться у вихідне положення. (Якщо кінцева зупинка визначена як position_endstop=0, то на початку кожного руху степпер відійде від кінцевої зупинки.) Він виконає це коливання десять разів.

Якщо степпер взагалі не рухається, перевірте параметри «enable_pin» і «step_pin» для степера. Якщо кроковий двигун рухається, але не повертається у вихідне положення, перевірте параметр "dir_pin". Якщо кроковий двигун коливається в неправильному напрямку, це зазвичай означає, що "dir_pin" для осі потрібно інвертувати. Це робиться додаванням "!" до "dir_pin" у файлі конфігурації принтера (або видалення його, якщо він уже є). Якщо двигун рухається значно більше або значно менше, ніж один міліметр, перевірте параметр "rotation_distance".

Виконайте наведений вище тест для кожного крокового двигуна, визначеного у файлі конфігурації. (Установіть для параметра STEPPER команди STEPPER_BUZZ назву розділу конфігурації, який потрібно перевірити.) Якщо в екструдері немає нитки, можна використовувати STEPPER_BUZZ для перевірки підключення двигуна екструдера (використовуйте STEPPER=extruder). В іншому випадку найкраще перевірити двигун екструдера окремо (див. наступний розділ).

Після перевірки всіх кінцевих упорів і всіх крокових двигунів необхідно перевірити механізм самонаведення. Видайте команду G28 для всіх осей. Відключіть живлення принтера, якщо він не працює належним чином. Повторно виконайте етапи перевірки кінцевого упору та крокового двигуна, якщо необхідно.

## Перевірте двигун екструдера

Щоб перевірити двигун екструдера, необхідно нагріти екструдер до температури друку. Перейдіть до розділу графіка температури та виберіть цільову температуру зі спадного списку температури (або введіть відповідну температуру вручну). Зачекайте, поки принтер досягне потрібної температури. Потім перейдіть до командної консолі та натисніть кнопку «Видавити». Переконайтеся, що двигун екструдера обертається в правильному напрямку. Якщо це не так, перегляньте поради щодо усунення несправностей у попередньому розділі, щоб підтвердити параметри «enable_pin», «step_pin» і «dir_pin» для екструдера.

## Відкалібруйте налаштування PID

Klipper підтримує [PID-контроль](https://en.wikipedia.org/wiki/PID_controller) для екструдера та нагрівачів ложа. Щоб використовувати цей механізм керування, необхідно відкалібрувати параметри PID на кожному принтері (параметри PID, знайдені в інших прошивках або у прикладах файлів конфігурації, часто працюють погано).

Щоб відкалібрувати екструдер, перейдіть до командної консолі та запустіть команду PID_CALIBRATE. Наприклад: `PID_CALIBRATE HEATER=extruder TARGET=170`

Після завершення тесту налаштування запустіть `SAVE_CONFIG` щоб оновити файл printer.cfg до нових налаштувань PID.

Якщо принтер має платформу з підігрівом і він підтримує ШІМ (широтно-імпульсну модуляцію), тоді рекомендується використовувати PID-контроль для платформи. (Коли обігрівач ліжка керується за допомогою алгоритму PID, він може вмикатися та вимикатися десять разів на секунду, що може не підходити для обігрівачів, які використовують механічний перемикач.) Типова команда калібрування PID ліжка: `PID_CALIBRATE HEATER=heater_bed TARGET= 60`

## Наступні кроки

Цей посібник призначений для того, щоб допомогти з базовою перевіркою налаштувань PIN-коду у файлі конфігурації Klipper. Обов’язково прочитайте посібник [вирівнювання ліжка](Bed_Level.md). Також перегляньте документ [Slicers](Slicers.md) для отримання інформації щодо налаштування слайсера за допомогою Klipper.

Переконавшись, що основний друк працює, доцільно розглянути можливість калібрування [випередження тиску](Pressure_Advance.md).

Можливо, знадобиться виконати інші типи детального калібрування принтера – в Інтернеті доступно кілька посібників, які допоможуть у цьому (наприклад, виконайте пошук в Інтернеті за запитом «калібрування 3d-принтера»). Наприклад, якщо ви відчуваєте ефект, який називається дзвоном, ви можете спробувати виконати посібник з налаштування [компенсації резонансу](Resonance_Compensation.md).
